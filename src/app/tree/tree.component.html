<app-tree-panel (addEvent)="addNode($event)" (deleteEvent)="deleteNode()"></app-tree-panel>

    <mat-tree [dataSource]="dataSource" [treeControl]="treeControl">
      <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle
                     (click)="onTreeClick(node)" [ngClass]="{ 'background-highlight': activeNode === node, 'back': node }">
        <span class="txtColor" >{{node.id}}​</span>
      </mat-tree-node>

      <mat-nested-tree-node *matTreeNodeDef="let node; when hasChild"  matTreeNodePadding [ngClass]="{'rootNode': node }">
        <button mat-icon-button matTreeNodeToggle [ngClass]="{'buttonExpand': node}">
          <mat-icon class="mat-icon-rtl-mirror">
            {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
          </mat-icon>
        </button>
        <mat-checkbox [checked]="node.checked" id="{{'checkbox-' + node.id}}" class="checklist-leaf-node" 
        (change)="checked(node)"><span>{{node.id}}​</span></mat-checkbox>
        <div [class.invisble]="!treeControl.isExpanded(node)">
          <ng-container matTreeNodeOutlet ></ng-container>
        </div>
      </mat-nested-tree-node>
    </mat-tree>

<div class="addNewNode" *ngIf="addNodePressed">
    <!-- <mat-tree-node *matTreeNodeDef="let node;when: addNewNode" matTreeNodePadding> -->
      <mat-form-field>
        <input matInput #itemValue placeholder="Имя узла...">
      </mat-form-field>
      <button mat-button (click)="saveNode(itemValue.value)">Save</button>
      <!-- </mat-tree-node> -->
    </div>